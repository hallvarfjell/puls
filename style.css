/* ============ ROOT ============ */
:root{
  --bg:#0b0f14;
  --border:rgba(255,255,255,.12);
  --text:rgba(255,255,255,.94);
  --muted:rgba(255,255,255,.70);

  --accent:#27f5a4;
  --speed:#ffffff;
  --incl:#6ecbff;       /* lysebl√•, fin kontrast for stigning */

  --danger:#ff4d6d;

  --radius:16px;
  --radiusSm:12px;
  --shadow:0 10px 26px rgba(0,0,0,.28);

  --pad:14px;
  --gap:12px;

  --baseFont:22px;
  --font:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;

  --s0:#ffffff;
  --s1:#2f84ff;
  --s2:#27f5a4;
  --s3:#ffd500;
  --s4:#ff9f1a;
  --s5:#ff3b30;
}

*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html,body{ height:100%; margin:0; font-family:var(--font); color:var(--text); font-size:var(--baseFont); }
body{
  background:
    radial-gradient(1200px 800px at 30% -10%, rgba(47,132,255,0.22), transparent 60%),
    radial-gradient(900px 700px at 90% 10%, rgba(39,245,164,0.12), transparent 55%),
    var(--bg);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.hidden{ display:none !important; }

/* ============ HEADER ============ */
.appHeader.compact{
  position:sticky; top:0; z-index:20;
  padding:6px var(--pad);
  padding-top:calc(6px + env(safe-area-inset-top));
  backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
  background:linear-gradient(to bottom, rgba(11,15,20,.92), rgba(11,15,20,.55));
  border-bottom:1px solid rgba(255,255,255,.08);
}
.headerRow{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.logoWrap{ display:flex; align-items:center; min-height:42px; }
.logoImg{ height:28px; width:auto; display:block; }

.versionTag{
  font-size:0.9rem;
  color:rgba(255,255,255,.75);
  padding:4px 8px; border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.18);
}

.headerRight{ display:flex; align-items:center; gap:10px; }
.bleBtnRow{ display:flex; gap:8px; }

/* Like BLE‚Äëknapper */
.bleBtn{
  position:relative;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.08);
  color:rgba(255,255,255,.92);
  font-weight:900; font-size:0.95rem; cursor:pointer;
}
.bleBtn.connected{
  width:44px; height:44px;
  padding:0; border-radius:999px;
  font-size:0; /* skjul tekst */
  border:2px solid rgba(39,245,164,.75);
  background:rgba(39,245,164,.10);
}
#connectBtn.connected::before{
  content:"‚ô•"; /* enkelt hjertesymbol */
  position:absolute; inset:0; display:grid; place-items:center;
  color:#fff; font-size:20px; font-weight:900;
}
#treadmillBtn.connected::before{
  content:"üèÉ"; /* l√∏per-emoji ‚Äì kan byttes til egen SVG senere */
  position:absolute; inset:0; display:grid; place-items:center;
  font-size:20px;
}
.bleBtn.connected::after{
  content:"‚úì"; position:absolute; right:-6px; top:-6px;
  width:18px; height:18px; border-radius:50%;
  background:#27f5a4; color:#0b0f14; display:grid; place-items:center;
  font-size:12px; font-weight:900; border:2px solid #0b0f14;
}

/* Update banner */
.updateBanner{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:8px 10px; border-radius:12px;
  border:1px solid rgba(47,132,255,.35); background:rgba(47,132,255,.14);
  margin-bottom:8px;
}
.updateTitle{ font-weight:950; font-size:0.95rem; }
.updateSub{ color:rgba(255,255,255,.78); font-size:0.9rem; }
.updateActions{ display:flex; gap:8px; }
.updateBtn{ padding:8px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.10); color:rgba(255,255,255,.92); font-weight:900; font-size:0.9rem; cursor:pointer; }
.updateBtn.ghost{ background:transparent; border-color:rgba(255,255,255,.10); }

/* ============ PAGE LAYOUT ============ */
.page{
  padding: var(--pad);
  padding-bottom: calc(var(--pad) + env(safe-area-inset-bottom));
  display:flex; flex-direction:column; gap: var(--gap);
  max-width: 1200px; margin:0 auto;
}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:12px; box-shadow:var(--shadow);
}
.cardTitle{ font-weight:900; margin:0 0 8px 2px; color:rgba(255,255,255,.88); font-size:1.02rem; }

/* ============ LIVE ============ */
.liveCard{ padding:10px; }
.liveGrid{ display:grid; grid-template-columns: 1fr 0.9fr; gap:10px; align-items:stretch; }

.liveLabel{ color:var(--muted); font-size:0.95rem; font-weight:800; }
.liveValue{ font-size:3.6rem; line-height:1.0; font-weight:950; letter-spacing:-.6px; color:var(--accent); margin-top:2px; }
.liveMeta{ margin-top:6px; display:flex; gap:8px; flex-wrap:wrap; color:var(--muted); font-size:0.95rem; }
.dot{ opacity:.6; }
.notice{ margin-top:8px; padding:8px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.10);
  background:rgba(255, 77, 109, .12); color:rgba(255,255,255,.90); font-size:0.95rem; }

.liveSide{ display:flex; flex-direction:column; gap:8px; }
.liveBox.small{
  background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:8px 10px;
}
.metricLabel{ color:var(--muted); font-size:0.9rem; font-weight:800; }
.metricValueRow{ display:flex; align-items:flex-end; gap:6px; }
.metricValue{ font-size:2.0rem; font-weight:950; line-height:1.0; }
.metricUnit{ color:var(--muted); font-size:0.95rem; padding-bottom:3px; }

/* ============ CHART ============ */
.chartWrap{ height:300px; width:100%; padding:4px 2px 0 2px; }
canvas{
  width:100% !important; height:100% !important; display:block;
  border-radius:12px; background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.06);
}

/* ============ TIMER (kompakt) ============ */
.timerCard{ padding:10px; }
.timerTop{ display:flex; gap:10px; align-items:flex-end; justify-content:space-between; }
.timerLabel{ color:var(--muted); font-size:0.95rem; font-weight:850; }
.timerClock{ font-size:3.0rem; font-weight:950; letter-spacing:-.5px; line-height:1.0; }
.phaseText{ color:rgba(255,255,255,.88); font-weight:900; font-size:1.0rem; margin-bottom:6px; }
.totalWrap{ color:var(--muted); font-size:0.95rem; }

.timerInputs.compact{ margin-top:8px; background:rgba(0,0,0,.16); border:1px solid rgba(255,255,255,.07); border-radius:12px; padding:10px; }
.gridCompact{ display:grid; grid-template-columns: repeat(5, minmax(0, 1fr)); gap:8px; }
.field span{ display:block; font-size:.9rem; color:var(--muted); margin-bottom:4px; font-weight:800; }
input, select{
  width:100%; padding:10px 10px; border-radius:12px; border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.22); color:rgba(255,255,255,.92); outline:none; font-size:0.95rem;
}
.btnRow{ display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap; }
.btnRow.tight{ margin-top:6px; }
.btnRow.tiny{ margin-top:4px; }
.flexGrow{ flex:1; }

.secondaryBtn{
  padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.08); color:rgba(255,255,255,.92); font-weight:900; font-size:0.95rem; cursor:pointer;
}
.secondaryBtn.ghost{ background:transparent; border-color:rgba(255,255,255,.10); }
.secondaryBtn.danger{ border-color: rgba(255,77,109,.35); background: rgba(255,77,109,.14); }

/* ============ ZONES ============ */
.zoneChart{ display:flex; flex-direction:column; gap:10px; }
.zoneRow{ display:grid; grid-template-columns:52px 1fr 88px; gap:10px; align-items:center; }
.zoneLabel{ font-weight:950; }
.zoneBarWrap{ height:18px; border-radius:999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.10); overflow:hidden; }
.zoneBar{ height:100%; width:0%; border-radius:999px; }
.zoneTime{ text-align:right; font-weight:950; }
.zoneBar.s0{ background: var(--s0); opacity:.90; }
.zoneBar.s1{ background: var(--s1); }
.zoneBar.s2{ background: var(--s2); }
.zoneBar.s3{ background: var(--s3); }
.zoneBar.s4{ background: var(--s4); }
.zoneBar.s5{ background: var(--s5); }

.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.statsText{ font-size: 1.0rem; line-height: 1.35; color: rgba(255,255,255,.92); white-space: pre-wrap; }

/* ============ MODAL ============ */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.55);
  display:flex; align-items:flex-start; justify-content:center;
  padding: 14px; padding-top: calc(14px + env(safe-area-inset-top)); overflow:auto; z-index:50; }
.modalCard{ width:min(1200px, 100%); background:linear-gradient(180deg, rgba(18,24,34,.95), rgba(12,16,22,.92));
  border:1px solid rgba(255,255,255,.14); border-radius: 14px; box-shadow: 0 18px 50px rgba(0,0,0,.45); padding: 12px; }
.modalHeader{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 2px 2px 8px 2px; }
.modalTitle{ font-size:1.2rem; font-weight:950; }
.modalSub{ color:var(--muted); font-size:0.95rem; margin-top:2px; }
.modalGrid{ display:grid; grid-template-columns: 1.1fr 0.9fr; gap: 12px; align-items:start; }
.modalSectionTitle{ font-weight:950; margin: 6px 2px; color: rgba(255,255,255,.88); }
.resultsCanvasWrap{ height: 320px; }
#resultsCanvas{ height:320px !important; }
.speedEditor{ display:flex; flex-direction:column; gap:8px; padding: 4px 0; }
.speedRow{ display:grid; grid-template-columns: 1fr 140px 140px; gap:8px; align-items:center; }
.speedRowLabel{ font-weight:900; color:rgba(255,255,255,.90); }
.speedRow input{ text-align:right; }

@media (max-width: 980px){
  .liveGrid{ grid-template-columns:1fr; }
  .resultsCanvasWrap{ height:280px; }
  #resultsCanvas{ height:280px !important; }
}
